<div class="group-column">
    <div class="group-column ">
        <h3 class="group-header">
            Editor
        </h3>
        <h3 class="group__separator__vertical"></h3>
    </div>
    <div class="group">
        <div class="group__form group__form-start">
            <label class="group_label  flex_basis__50" for="theme">Editor Theme</label>
            <select class="group_label" id="theme" data-storage="codemirror.options" data-action="theme">
                <option value="3024-day">3024-day</option>
                <option value="3024-night">3024-night</option>
                <option value="abcdef">abcdef</option>
                <option value="ambiance-mobile">ambiance-mobile</option>
                <option value="ambiance">ambiance</option>
                <option value="base16-dark">base16-dark</option>
                <option value="base16-light">base16-light</option>
                <option value="bespin">bespin</option>
                <option value="blackboard">blackboard</option>
                <option value="cobalt">cobalt</option>
                <option value="colorforth">colorforth</option>
                <option value="dracula">dracula</option>
                <option value="duotone-dark">duotone-dark</option>
                <option value="duotone-light">duotone-light</option>
                <option value="eclipse">eclipse</option>
                <option value="elegant">elegant</option>
                <option value="erlang-dark">erlang-dark</option>
                <option value="gruvbox-dark">gruvbox-dark</option>
                <option value="hopscotch">hopscotch</option>
                <option value="icecoder">icecoder</option>
                <option value="idea">idea</option>
                <option value="isotope">isotope</option>
                <option value="lesser-dark">lesser-dark</option>
                <option value="liquibyte">liquibyte</option>
                <option value="lucario">lucario</option>
                <option value="material">material</option>
                <option value="mbo">mbo</option>
                <option value="mdn-like">mdn-like</option>
                <option value="midnight">midnight</option>
                <option value="monokai">monokai</option>
                <option value="neat">neat</option>
                <option value="neo">neo</option>
                <option value="night">night</option>
                <option value="nord">nord</option>
                <option value="oceanic-next">oceanic-next</option>
                <option value="panda-syntax">panda-syntax</option>
                <option value="paraiso-dark">paraiso-dark</option>
                <option value="paraiso-light">paraiso-light</option>
                <option value="pastel-on-dark">pastel-on-dark</option>
                <option value="railscasts">railscasts</option>
                <option value="rubyblue">rubyblue</option>
                <option value="seti">seti</option>
                <option value="shadowfox">shadowfox</option>
                <option value="solarized">solarized</option>
                <option value="ssms">ssms</option>
                <option value="the-matrix">the-matrix</option>
                <option value="tomorrow-night-bright">tomorrow-night-bright</option>
                <option value="tomorrow-night-eighties">tomorrow-night-eighties</option>
                <option value="ttcn">ttcn</option>
                <option value="twilight">twilight</option>
                <option value="vibrant-ink">vibrant-ink</option>
                <option value="xq-dark">xq-dark</option>
                <option value="xq-light">xq-light</option>
                <option value="yeti">yeti</option>
                <option value="zenburn">zenburn</option>
            </select>
        </div>
    </div>
    <div class="group">
        <div class="group__form group__form-start flex_basis__50">
            <label class="group_label" for="font-family"> Font Family</label>
            <select type="select" id="font-family" class="group_label" data-storage="app.config" data-action="font-family">
                <option>Consolas</option>
                <option>Courier New</option>
                <option>Source Code Pro</option>
                <option>Roboto</option>
                <option>Open Sans</option>
                <option>Fira Code</option>
            </select>
        </div>
        <div class="group__separator__horizontal"></div>
        <div class="group__form group__form-start flex_basis__50">
            <label class="group_label" for="font-size"> Font Size </label>
            <select type="select" class="group_label" data-storage="app.config" data-action="font-size">
                <option>6px</option>
                <option>7px</option>
                <option>8px</option>
                <option>9px</option>
                <option>10px</option>
                <option>11px</option>
                <option>12px</option>
                <option>13px</option>
                <option>14px</option>
                <option>15px</option>
                <option>16px</option>
                <option>17px</option>
                <option>18px</option>
                <option>19px</option>
                <option>20px</option>
                <option>21px</option>
                <option>22px</option>
                <option>23px</option>
                <option>24px</option>
                <option>25px</option>
                <option>26px</option>
                <option>27px</option>
                <option>28px</option>
                <option>29px</option>
                <option>30px</option>
                <option>31px</option>
                <option>32px</option>
                <option>33px</option>
                <option>34px</option>
                <option>35px</option>
                <option>36px</option>
                <option>37px</option>
                <option>38px</option>
                <option>39px</option>
                <option>40px</option>
                <option>41px</option>
                <option>42px</option>
                <option>43px</option>
                <option>44px</option>
                <option>45px</option>
                <option>46px</option>
                <option>47px</option>
                <option>48px</option>
                <option>49px</option>
                <option>50px</option>
                <option>51px</option>
                <option>52px</option>
                <option>53px</option>
                <option>54px</option>
                <option>55px</option>
                <option>56px</option>
                <option>57px</option>
                <option>58px</option>
                <option>59px</option>
                <option>60px</option>
                <option>61px</option>
                <option>62px</option>
                <option>63px</option>
                <option>64px</option>
                <option>65px</option>
                <option>66px</option>
                <option>67px</option>
                <option>68px</option>
                <option>69px</option>
                <option>70px</option>
                <option>71px</option>
                <option>72px</option>
            </select>
        </div>
    </div>
</div>

<div class="group-column">
    <div class="group-column">
        <p class="group-header">
            Advanced options
        </p>
        <h3 class="group__separator__vertical"></h3>
    </div>
    <div class="group">
        <div class="group__form group__form_2x2 group__form-start flex_basis__50">
            <label class="group_label" for="changeFontSize">Reset</label>
            <input type="checkbox" data-action="dev-mode" data-storage="app.config">
        </div>
        <div class="group__separator__horizontal"></div>
        <div class="group__form group__form_2x2 group__form-start">
            <label class="group_label" for="changeFontSize"> Auto update </label>
            <input type="checkbox" data-action="autoupdate" data-storage="app.config">
        </div>
    </div>
</div>
<script>

    var change = (event) => console.log(event.key, event.newValue);
var toggleCheckbox = (storageName, itemName, val) => {
    ls.setStorageItem(storageName, itemName, val);
};
var changeTheme = (e) => {
    var newVal = $(e.target).val();
    for (let i = 0; i <Workspace.config.editors.instances ; i++) {
        setOption("theme", newVal, instances[i]);
    }
};
var changeFontSize = (e) => {
    var newVal = parseInt($(e.target).val());
    setCssOption($(e.target).attr("data-action"), newVal);
}
var changeFontFamily = (e) => {
    var newVal = $(e.target).val();
    setCssOption($(e.target).attr("data-action"), newVal);
}
class Settings{
    cachedParametrs(stor) {
        if (stor !== undefined)
            return ls.getStorage(stor);
    }
    init() {
        var that = this;
        $("[type=\"checkbox\"]").each(function(i, el) {
            var key = $(this).attr("data-action"),
                stor = $(this).attr("data-storage");
            if (that.cachedParametrs(stor).hasOwnProperty(key))
                $(this).attr("checked", that.cachedParametrs(stor)[key]);
        });
        $("select").each(function(i, el) {
            var key = $(this).attr("data-action"),
                stor = $(this).attr("data-storage");
            console.log('key: ', key);
            if (that.cachedParametrs(stor).hasOwnProperty(key))
                $(this).val(that.cachedParametrs(stor)[key]);
        });
    }
}
$(document).on("change", "[data-action=\"font-size\"]", (e) => {
    changeFontSize(e);
});
$(document).on("change", "[data-action=\"font-family\"]", (e) => {
    changeFontFamily(e);
});
$(document).on("change", "[data-action=\"theme\"]", (e) => {
    changeTheme(e);
});
if (window.addEventListener) {
    window.addEventListener('storage', change, false);
} else if (window.attachEvent) {
    window.attachEvent('onstorage', change);
} else {
    window.onstorage = change;
}
new Settings.init();
</script>